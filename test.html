<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìò 1-sinf Matematika Test</title>
<style>
  body {
    font-family: "Comic Sans MS", sans-serif;
    background: linear-gradient(135deg, #a8edea, #fed6e3);
    text-align: center;
    padding: 20px;
  }
  #questionBox {
    background: white;
    padding: 25px;
    margin: auto;
    width: 90%;
    max-width: 400px;
    border-radius: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  button {
    margin: 8px;
    padding: 10px 18px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 18px;
    transition: 0.3s;
  }
  button:hover {
    transform: scale(1.05);
  }
  .correct { background-color: #8ef58e !important; }
  .wrong { background-color: #f58e8e !important; }
  #nextBtn {
    background-color: #007bff;
    color: white;
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>üìò 1-sinf Matematika Test</h1>
<div id="questionBox"></div>
<button id="nextBtn" onclick="nextQuestion()" style="display:none;">‚û°Ô∏è Keyingi</button>

<script>
const allQuestions = [
  {q:"1 + 1 =",a:["1","2","3"],c:1},
  {q:"2 + 1 =",a:["2","3","4"],c:1},
  {q:"2 + 2 =",a:["3","4","5"],c:1},
  {q:"3 + 1 =",a:["4","3","5"],c:0},
  {q:"3 + 2 =",a:["6","4","5"],c:2},
  {q:"4 + 1 =",a:["5","6","7"],c:0},
  {q:"4 + 2 =",a:["5","6","7"],c:1},
  {q:"5 + 1 =",a:["7","5","6"],c:2},
  {q:"5 + 2 =",a:["6","7","8"],c:1},
  {q:"6 + 1 =",a:["8","6","7"],c:2},
  {q:"6 + 2 =",a:["7","8","9"],c:1},
  {q:"7 + 1 =",a:["8","9","10"],c:0},
  {q:"7 + 2 =",a:["8","9","10"],c:1},
  {q:"8 + 1 =",a:["9","10","11"],c:0},
  {q:"8 + 2 =",a:["9","10","11"],c:1},
  {q:"9 + 1 =",a:["10","9","11"],c:0},
  {q:"9 + 2 =",a:["10","11","12"],c:1},
  {q:"3 + 3 =",a:["5","6","7"],c:1},
  {q:"4 + 3 =",a:["6","7","8"],c:1},
  {q:"5 + 3 =",a:["7","8","9"],c:1},
  {q:"6 + 3 =",a:["8","9","10"],c:1},
  {q:"7 + 3 =",a:["9","10","11"],c:1},
  {q:"8 + 3 =",a:["10","11","12"],c:1},
  {q:"9 + 3 =",a:["11","12","13"],c:1},
  {q:"10 - 7 =",a:["3","4","5"],c:0},
  {q:"9 - 3 =",a:["5","6","7"],c:1},
  {q:"8 - 2 =",a:["6","7","8"],c:0},
  {q:"7 - 1 =",a:["6","7","8"],c:0},
  {q:"6 - 4 =",a:["1","2","3"],c:2},
  {q:"5 - 3 =",a:["1","2","3"],c:1},
  {q:"4 - 1 =",a:["3","4","2"],c:0},
  {q:"3 - 1 =",a:["1","2","3"],c:1},
  {q:"10 - 9 =",a:["1","2","3"],c:0},
  {q:"9 - 5 =",a:["3","4","5"],c:1},
  {q:"8 - 4 =",a:["4","5","6"],c:0},
  {q:"7 - 2 =",a:["4","5","6"],c:1},
  {q:"6 - 2 =",a:["3","4","5"],c:1},
  {q:"5 - 1 =",a:["4","5","3"],c:0},
  {q:"10 - 4 =",a:["6","7","8"],c:0},
  {q:"9 - 6 =",a:["3","4","5"],c:0},
  {q:"8 - 5 =",a:["2","3","4"],c:1},
  {q:"7 - 3 =",a:["3","4","5"],c:1},
  {q:"10 - 1 =",a:["8","9","10"],c:1},
  {q:"6 + 4 =",a:["9","10","11"],c:1},
  {q:"5 + 4 =",a:["8","9","10"],c:1},
  {q:"4 + 4 =",a:["7","8","9"],c:1},
  {q:"3 + 5 =",a:["7","8","9"],c:0},
  {q:"2 + 6 =",a:["7","8","9"],c:1},
  {q:"1 + 7 =",a:["7","8","9"],c:1},
  {q:"8 - 6 =",a:["2","3","4"],c:0},
  {q:"7 - 5 =",a:["1","2","3"],c:1},
  {q:"9 - 8 =",a:["1","2","3"],c:0},
  {q:"10 - 5 =",a:["4","5","6"],c:1},
  {q:"10 - 6 =",a:["3","4","5"],c:1},
  {q:"10 - 2 =",a:["7","8","9"],c:0},
  {q:"8 - 3 =",a:["4","5","6"],c:2},
  {q:"9 - 7 =",a:["1","2","3"],c:1},
  {q:"10 - 8 =",a:["2","1","3"],c:0},
  {q:"5 + 5 =",a:["9","10","11"],c:1},
  {q:"6 + 5 =",a:["10","11","12"],c:1},
  {q:"7 + 5 =",a:["11","12","13"],c:1},
  {q:"8 + 5 =",a:["12","13","14"],c:1},
  {q:"9 + 5 =",a:["13","14","15"],c:1},
  {q:"10 + 5 =",a:["14","15","16"],c:1},
  {q:"10 + 3 =",a:["12","13","14"],c:1},
  {q:"9 + 4 =",a:["12","13","14"],c:1},
  {q:"8 + 3 =",a:["10","11","12"],c:1},
  {q:"7 + 2 =",a:["8","9","10"],c:1},
  {q:"6 + 2 =",a:["7","8","9"],c:1},
  {q:"4 + 3 =",a:["6","7","8"],c:1},
  {q:"3 + 2 =",a:["4","5","6"],c:1},
  {q:"2 + 1 =",a:["2","3","4"],c:1},
  {q:"1 + 3 =",a:["3","4","5"],c:1}
];

let score = 0;
let current = 0;
let questions = [];

function startQuiz() {
  questions = [...allQuestions].sort(() => 0.5 - Math.random()).slice(0,10);
  showQuestion();
}

function showQuestion() {
  const q = questions[current];
  const box = document.getElementById("questionBox");
  const nextBtn = document.getElementById("nextBtn");

  box.innerHTML = `<h2>${current+1}/10</h2><h3>${q.q}</h3>`;
  q.a.forEach((ans, i) => {
    const btn = document.createElement("button");
    btn.textContent = ans;
    btn.onclick = () => checkAnswer(btn, i, q.c);
    box.appendChild(btn);
  });

  nextBtn.style.display = "none";
}

function checkAnswer(button, chosen, correct) {
  const buttons = button.parentNode.querySelectorAll("button");
  buttons.forEach(b => b.disabled = true);
  if(chosen === correct){
    button.classList.add("correct");
    score += 10;
  } else {
    button.classList.add("wrong");
  }
  document.getElementById("nextBtn").style.display = "inline-block";
}

function nextQuestion() {
  current++;
  if(current < questions.length){
    showQuestion();
  } else {
    finishTest();
  }
}

function finishTest(){
  alert("üéâ Test tugadi!\nSizning natijangiz: " + score + " ball!");

  let user = JSON.parse(localStorage.getItem("currentUser"));
  let users = JSON.parse(localStorage.getItem("users")) || [];

  if (!user.totalScore) user.totalScore = 0;
  user.totalScore += score;

  localStorage.setItem("currentUser", JSON.stringify(user));

  users = users.map(u => 
    (u.name === user.name && u.sinf === user.sinf) ? user : u
  );
  localStorage.setItem("users", JSON.stringify(users));

  window.location.href = "leaderboard.html";
}

startQuiz();
</script>

</body>
</html>